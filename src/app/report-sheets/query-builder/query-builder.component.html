<div class="container-fluid mt-1" *ngIf="view === 0">

  <div class="row py-3 px-4">
   
      <div class="col-md-12">
              <h1 class="text-bold">Query Builder <span *ngIf="errorExists"style="cursor : pointer" class="flaticon-info text-danger ml-3" (click)="loadErrors()"></span></h1>
            </div>
      <div class="col-md-12">
      <nav aria-label="breadcrumb">
          <ol class="breadcrumb">
              <li class="breadcrumb-item"><a href="#">Query Builder</a></li>
              <li class="breadcrumb-item active" aria-current="page">Query Builder table</li>
          </ol>
      </nav>
      </div>
  </div>
  <div class="row py-2 px-4">
      <div class="col-md-12">
          <div class="card panel mb-5">
              <div class="card-body p-4">
                          <div class="row p-4">
                                  <div class="col-md-12">
                                          <h6 class="panel-title  font-weight-bold mb-1">
                                            Query Builder Table
                                              </h6>
                                              <!-- <p class="subtitle mb-0  ">Set the appropriate information</p> -->
                                  </div>
                                  
                          </div>
                          <div class="row px-4  mb-0">
                                  <div class="col-10"></div>
                                  <div class="col">
                                    <button class="btn btn-block btn-primary " (click)="configure()"><i class="flaticon-add mr-2"></i>Configure</button>
                                  </div>
                                  
                          </div> 
                          <div class="row p-4">
                              <div class="col-md-12">
                                  <table id="myTable" class="table alt-table table-borderless">
                                      <thead>
                                        <th>Title</th>
                                        <th> Description</th>
                                        <th>Content</th>
                                        <th>Actions</th>
                                        <th></th>
                                      </thead>
                                      <tbody >
                                        <tr *ngFor="let item of queries">
                                          <td>{{item.title}}</td>
                                          <td>{{item.description}}</td>
                                          <td>{{item.content}}</td>
                                          <td><a (click)="updateQuery(item.id)"> <span><i class="flaticon-pencil"></i></span></a></td>
                                          <td><a class="btn btn-danger round-table-button" (click)="Delete(item.id)">-</a></td>
                                        </tr>                                        
                                      </tbody>
                                  </table>
                              </div>
                          </div>
                      
              </div>
          </div>


      </div>

  </div>
</div>




<!-- view for table -->

<!-- <div class="container-fluid mt-1" *ngIf="view === 0">
  <div class="row p-3 pl-4">
    <div class="col-md-6">
      <h1 class="text-bold">Query Builder Table</h1>
    </div>

    <div class="col-md-2 offset-md-4 pr-0">
      <button class="btn btn-block btn-primary " (click)="configure()"><i
          class="flaticon-add mr-2"></i>Configure</button>
    </div>
  </div>
  <div class="row p-2 pl-4 mt-5">
    <div class="col-md-12">

      <div class="row">
        <div class="col-md-12">
          <div class="panel">
            <div class="panel-body">
              <table class="table table-borderless table-align">
                <thead>
                  <tr>
                    <th>Title</th>
                    <th> Description</th>
                    <th>Content</th>
                    <th>Actions</th>
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  <tr *ngFor="let item of queries">
                    <td>{{item.title}}</td>
                    <td>{{item.description}}</td>
                    <td>{{item.content}}</td>
                    <td><a (click)="updateQuery(item.id)"> <span><i class="flaticon-pencil"></i></span></a></td>
                    <td><a class="btn btn-danger round-table-button" (click)="Delete(item.id)">-</a></td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->



<!-- view for form new -->

<div class="container-fluid mt-1" *ngIf="view === 1">
  <div class="row p-3 pl-4">
    <div class="col-md-12">
      <h1 class="text-bold">Query Builder Form</h1>
    </div>
  </div>

  <div class="col-md">
    <div class="card panel">
      <div class="card-body form-card">
        <!-- <form> -->
        <div class="panel-group" role="tablist" aria-multiselectable="true">
          <div class="panel-default">
            <div class="panel-heading" role="tab" id="headingBasic">
              <div class="float-left form-icon text-center mr-3">
                <span class="flaticon-paper  primary-color"></span>
              </div>
              <h4 class="panel-title font-weight-bold secondary-color mb-0" #basic>
                Query Builder Details
              </h4>
              <p class="subtitle mb-0  ">Please fill in the appropriate data </p>
            </div>
            <div id="collapseBasic" class="panel-collapse collapse show" role="tabpanel" aria-labelledby="headingBasic">
              <div class="panel-body">
                <div class="col-sm-12 col-md-10 offset-md-1">
                  <div class="form-body">

                    <div class="row">
                      <div class="col-md-4">
                        <div class="form-group row mr-2">
                          <label for="Connections">Connections</label>
                          <!-- <select  id="mySelect" [(ngModel)]="connections.title" class="form-control search" >
                                    <option value="">&lt;-------&gt;</option>
                                    <option *ngFor="let v of connections" [value]="v.title">{{v.title}}</option>
                                </select> -->
                        </div>
                      </div>

                      <div class="col-md-4">
                        <div class="form-group row ml-2">
                          <label for="title"> Title</label>
                          <!-- <input type="text" name="title" class="form-control" [(ngModel)]="que.title" class="search"> -->
                        </div>
                      </div>
                    </div>

                    <div class="row">

                      <div class="col-md-8">
                        <div class="form-group row">
                          <label for="title"> Description</label>
                          <!-- <textarea name="description" id="" class="form-control search" [(ngModel)]="que.description"></textarea> -->
                        </div>
                      </div>
                    </div>

                    <div class="row">
                      <!-- <div class="col-md-4">
                          Switch to enter queries manually
                      </div>
                      <div class="col-md-2">
                          <label class="switch">
                              <input type="checkbox" [(ngModel)]="booleanVal" (ngOnChange)="onChange($event)">
                              <span class="slider round"></span>
                            </label>      
                      </div>                       -->

                      <div class="col-md-2">
                        Query
                      </div>
                      <div class="col-md-2">
                        <input type="radio" class="radio" id="manually" name="drone" [checked]="isManual"
                          (click)="setradio('manually')">
                        <label class="labelradio ml-2" for="manually">Manually</label>
                      </div>
                      <div class="col-md-2">
                        <input type="radio" class="radio" id="builder" name="drone" [checked]="!isManual"
                          (click)="setradio('builder')">
                        <label class="labelradio ml-2" for="builder">Use Builder</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>



            <div class="form-body" *ngIf="isManual">
              <textarea class="m-0 p-5 largetext col-md-12" rows="12"></textarea>
            </div>


            <div class="panel-body build col-sm-12 col-md-10 offset-md-1" *ngIf="!isManual">
              <div class="row">
                <div class="col-md-12">
                  <h6 class="font-weight-bold">
                    Builder
                  </h6>
                </div>
              </div>


              <!-- NAV TABS -->
              <div class="row mt-4">
                <div class="col-md-12">
                  <nav>
                    <div class="nav nav-tabs" id="nav-tab" role="tablist">
                      <a class="nav-item nav-link active" id="nav-home-tab" data-toggle="tab" href="#nav-table" role="tab" aria-controls="nav-home" aria-selected="true" (click) = "table()">Table</a>
                      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-column" role="tab" aria-controls="nav-profile" aria-selected="false" (click) = "column()">Column</a>
                      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-filter" role="tab" aria-controls="nav-profile" aria-selected="false" (click) = "filter()">Filter</a>
                      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-group-by" role="tab" aria-controls="nav-profile" aria-selected="false" (click) = "groupBy()">Group By</a>
                      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-order-by" role="tab" aria-controls="nav-profile" aria-selected="false">Order By</a>
                      <a class="nav-item nav-link" id="nav-profile-tab" data-toggle="tab" href="#nav-limit" role="tab" aria-controls="nav-profile" aria-selected="false">Limit</a>
                    </div>
                  </nav>
                  <div class="tab-content mt-4" id="nav-tabContent">
                    <div class="tab-pane fade show active" id="nav-table" role="tabpanel"
                      aria-labelledby="nav-home-tab">

                      <div class="row">
                        <div class="col-md-3">
                          <label for="Connections">Table <sup>*</sup></label>
                          <select id="mySelect" class="form-control search">
                            <option value="">&lt;-------&gt;</option>
                            <option>-----------</option>
                          </select>
                        </div>

                        <div class="col-md-2 mt-auto">
                          <button class="btn btn-primary btn-block" (click)= "showExtraFields()">Add extra table</button>
                        </div>

                      </div>
                      <div class="panel-body" *ngIf="showFields === 1">
                        <div class="row">
                          <div class="col-md-12">
                            <h6 class="font-weight-bold">
                              Addtional Table
                            </h6>
                          </div>
                        </div>

                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group row">
                              <div class="col-md-4">
                                <label for="Connections">Local Key(optional)</label>
                              </div>
                              <div class="col-md-8">
                                <select id="mySelect" class="form-control search">
                                  <option value="">&lt;-------&gt;</option>
                                  <option>------------</option>
                                </select>
                              </div>

                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group row">
                              <div class="col-md-4">
                                <label for="Connections">Types of Join</label>
                              </div>
                              <div class="col-md-8">
                                <select id="mySelect" class="form-control search">
                                  <option value="">&lt;-------&gt;</option>
                                  <option>------------</option>
                                </select>
                              </div>

                            </div>
                          </div>



                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group row">
                              <div class="col-md-4">
                                <label for="Connections">Table 2</label>
                              </div>
                              <div class="col-md-8">
                                <select id="mySelect" class="form-control search">
                                  <option value="">&lt;-------&gt;</option>
                                  <option>------------</option>
                                </select>
                              </div>

                            </div>
                          </div>
                          <div class="col-md-6">
                            <div class="form-group row">
                              <div class="col-md-4">
                                <label for="Connections">Alias(optional)</label>
                              </div>
                              <div class="col-md-8">
                                <select id="mySelect" class="form-control search">
                                  <option value="">&lt;-------&gt;</option>
                                  <option>------------</option>
                                </select>
                              </div>

                            </div>
                          </div>



                        </div>
                        <div class="row">
                          <div class="col-md-6">
                            <div class="form-group row">
                              <div class="col-md-4">
                                <label for="Connections">Foreign Key(Table 2)</label>
                              </div>
                              <div class="col-md-8">
                                <select id="mySelect" class="form-control search">
                                  <option value="">&lt;-------&gt;</option>
                                  <option>------------</option>
                                </select>
                              </div>

                            </div>
                          </div>



                        </div>
                        <div class="row mt-2">
                          <div class="col-md-10"></div>
                          <div class="col-md-2 text-right">
                            <button class="btn btn-primary">save table</button>
                          </div>
                        </div>

                      </div>

                    </div>

                    <div class="tab-pane fade" id="nav-column" role="tabpanel" aria-labelledby="nav-profile-tab">

                      <div class="row pt-3">
                        <div class="col-md-5">

                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Column<sup>*</sup></label>
                            </div>
                            <div class="col-md-8">
                              <select id="mySelect" class="form-control search">
                                <option value="">&lt;-------&gt;</option>
                                <option>-----------</option>
                              </select>
                            </div>

                          </div>

                        </div>

                        <div class="col-md-5">
                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Alias(Optional)</label>
                            </div>
                            <div class="col-md-8">
                              <input type="text" class="search">
                            </div>

                          </div>


                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-5">
                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Aggregate(Optional)</label>
                            </div>
                            <div class="col-md-8">
                              <select id="mySelect" class="form-control search">
                                <option value="">&lt;-------&gt;</option>
                                <option>-----------</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-10"></div>
                        <div class="col-md-2 text-right">
                          <button class="btn btn-primary btn-block">Save column</button>
                        </div>
                      </div>

                    </div>
                    <div class=" tab-pane fade" id="nav-filter" role="tabpanel" aria-labelledby="nav-profile-tab">

                      <div class="row pt-3">
                        <div class="col-md-5">

                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Column<sup>*</sup></label>
                            </div>
                            <div class="col-md-8">
                              <select id="mySelect" class="form-control search">
                                <option value="">&lt;-------&gt;</option>
                                <option>----------</option>
                              </select>
                            </div>

                          </div>

                        </div>

                        <div class="col-md-5">
                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Value</label>
                            </div>
                            <div class="col-md-8">
                              <select id="mySelect" class="form-control search">
                                <option value="">&lt;-------&gt;</option>
                                <option>-----------</option>
                              </select>
                            </div>
                          </div>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-md-5">
                          <div class="form-group row mr-2">
                            <div class="col-md-4">
                              <label for="Connections">Condition</label>
                            </div>
                            <div class="col-md-8">
                              <select id="mySelect" class="form-control search">
                                <option value="">&lt;-------&gt;</option>
                                <option>-----------</option>
                              </select>
                            </div>
                          </div>
                        </div>

                        <div class="col-md-5">
                          <div class="form-group row mr-2">
                            <div class="col-md-3">
                              <input type="radio" class="radio" id="manually" name="drone" disabled>
                              <label class="labelradio ml-2" for="manually" disbled>AND</label>
                            </div>
                            <div class="col-md-3">
                              <input type="radio" class="radio" id="manually" name="drone" disabled>
                              <label class="labelradio ml-2" for="manually" disabled>OR</label>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div class="row">
                        <div class="col-md-10"></div>
                        <div class="col-md-2 text-right">
                          <button class="btn btn-primary btn-block">Save Filter</button>
                        </div>
                      </div>
                    </div>
                    <div class=" tab-pane fade" id="nav-group-by" role="tabpanel" aria-labelledby="nav-profile-tab">

                      <div class="row pt-3">
                        <div class="col-md-8">
                          <div class="form-group row mr-2">
                            <label for="Connections">Group by</label>
                             <!-- <select  id="mySelect" class="form-control search" >
                                                      <option value="">&lt;-------&gt;</option>
                                                       <option ></option> 
                          </select> -->

                          <!-- <select class="selectpicker"  (change)="selectionChanged($event)"  multiple data-live-search="true">
                            <option>Mustard</option>
                            <option>Ketchup</option>
                            <option>Relish</option>
                          </select> -->
                          <ngx-select-dropdown class="search"
                         
                          [config]="config" 
                          [options]="options" 
                          [(ngModel)]="dataModel" 
                          [multiple]="true" >
                        </ngx-select-dropdown>
                       
                          </div>
                        </div>


                      </div>
                      <div class=" tab-pane fade" id="nav-order-by" role="tabpanel" aria-labelledby="nav-profile-tab">


                      </div>
                      <div class=" tab-pane fade" id="nav-limit" role="tabpanel" aria-labelledby="nav-profile-tab">


                      </div>

                    </div>

                     
                      <div class=" tab-pane fade" id="nav-order-by" role="tabpanel" aria-labelledby="nav-profile-tab">


                        nothing
                      </div>
                      <div class=" tab-pane fade" id="nav-limit" role="tabpanel" aria-labelledby="nav-profile-tab">


                        nothing
                      </div>

                   

                  </div>
                </div>
                <!-- NAV TAB ENDS -->


              </div>



              <!-- </form> -->
            </div>



            <div class="tab-content mt-4" id="nav-tabContent" *ngIf="!isManual">
              <div class="tab-pane fade show active" *ngIf="targets === 1">
                <div class="panel-body largetext">
                  <div class="row">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                      <table class="table alt-table table-borderless">
                        <thead>
                          <th>Type of Join</th>
                          <th>Alias</th>
                          <th>Table</th>
                          <th>on</th>
                          <th>Actions</th>
                          <th></th>
                        </thead>
                        <tbody>
                          <tr>
                            <td>left_join</td>
                            <td>user_table</td>
                            <td>users</td>
                            <td>addrss</td>
                            <td><a> <span><i class="flaticon-pencil"></i></span></a></td>
                            <td><a class="btn btn-danger round-table-button">-</a></td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="row pl-4">
                  <div class="col-md-12 text-bold">
                    RAW SCRIPT
                  </div>
                </div>

                <div class="panel-body largetext">
                  <div class="row largetext">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade show active"  *ngIf="targets === 2">
                <div class="panel-body largetext">
                  <div class="row">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                      <table class="table alt-table table-borderless">
                        <thead>
                          <th>Column</th>
                          <th>Aggregate</th>
                          <th>Alias</th>
                          <th>Actions</th>
                          <th></th>
                        </thead>
                        <tbody>
                          <tr>
                            <td>left_join</td>
                            <td>user_table</td>
                            <td>users</td>
                            <td><a> <span><i class="flaticon-pencil"></i></span></a></td>
                            <td><a class="btn btn-danger round-table-button">-</a></td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="row pl-4">
                  <div class="col-md-12 text-bold">
                    RAW SCRIPT
                  </div>
                </div>

                <div class="panel-body largetext">
                  <div class="row largetext">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade show active"  *ngIf="targets === 3">
                <div class="panel-body largetext">
                  <div class="row">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                      <table class="table alt-table table-borderless">
                        <thead>
                          <th>Column</th>
                          <th>Aggregate</th>
                          <th>Alias</th>
                          <th>Actions</th>
                          <th></th>
                        </thead>
                        <tbody>
                          <tr>
                            <td>left_join</td>
                            <td>user_table</td>
                            <td>users</td>
                            <td><a> <span><i class="flaticon-pencil"></i></span></a></td>
                            <td><a class="btn btn-danger round-table-button">-</a></td>
                          </tr>

                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>

                <div class="row pl-4">
                  <div class="col-md-12 text-bold">
                    RAW SCRIPT
                  </div>
                </div>

                <div class="panel-body largetext">
                  <div class="row largetext">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                    </div>
                  </div>
                </div>
              </div>
              <div class="tab-pane fade show active"  *ngIf="targets === 4">

                <div class="row pl-4">
                  <div class="col-md-12 text-bold">
                    RAW SCRIPT
                  </div>
                </div>

                <div class="panel-body largetext">
                  <div class="row largetext">
                    <div class="col-sm-12 col-md-10 offset-md-1">
                    </div>
                  </div>
                </div>
              </div>
            </div>



            <div class="card-footer text-muted">
              <div class="row p-3">
                <div class="col-md-8"></div>
                <div class="col-md-2 text-right"><button class="btn btn-outline-primary btn-block" (click)="Cancel()"
                    type="submit">Cancel</button>
                </div>
                <!-- <div class="col-md-2 text-right"><button class="btn btn-primary btn-block" (click)="populate()"
          type="submit">preview</button>
      </div> -->
                <div class="col-md-2 text-right">
                  <button class="btn btn-success btn-block" type="submit" (click)="processForm()">Save</button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>